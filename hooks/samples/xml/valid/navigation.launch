<launch>

	<!-- Parametros -->
	<arg name="rviz"         default="true" />
	<arg name="simulation"   default="false"/>
	<arg name="tf_gui"       default="false"/>
	<arg name="joy_number"   default="0"    />
	<arg name="slam"         default="false"/>
	<arg name="model_type"   default="asus"/>
	<arg name="map_name"     default="map"/>
	<arg name="sim_world"    default="amtc"/>

	<!-- Hardware -->
	<include file="$(find bender_nav)/launch/hardware.launch">
		<arg name="simulation" value="$(arg simulation)"/>
		<arg name="joy_number" value="$(arg joy_number)"/>
		<arg name="tf_gui"     value="$(arg tf_gui)"/>
		<arg name="model_type" value="$(arg model_type)"/>
		<arg name="sim_world"  value="$(arg sim_world)"/>
	</include>

	<!-- - - - L o c a l i z a t i o n - - - -->
	<group if="$(arg slam)">
		<!-- slam node -->
		<include file="$(find bender_nav)/launch/localization/gmapping.launch">
			<arg name="slam" value="true"/>
		</include>
	</group>
	<group unless="$(arg slam)">

		<!-- static map server -->
		<include file="$(find bender_nav)/launch/map_server.launch">
			<arg name="map_name" value="$(arg map_name)"/>
		</include>

		<!-- amcl -->
		<include file="$(find bender_nav)/launch/localization/amcl.launch"/>

	</group>
	
	<!-- - - - - P l a n n i n g  - - - - -->
	<!-- Move_Base -->
	<include file="$(find bender_nav)/launch/move_base.launch">
		<arg name="slam" value="$(arg slam)"/>
	</include>

	<!-- Goal Server -->
	<include file="$(find bender_nav)/launch/goal_server.launch">
		<arg name="slam" value="$(arg slam)"/>
	</include>


	<!-- - - - T  o  o  l  s - - - -->

	<!-- Semantic Map Server -->
	<include file="$(find bender_nav)/launch/tools/semantic_map_server.launch">
		<arg name="load_default_map" value="false"     if="$(arg slam)"/>
		<arg name="load_default_map" value="true"  unless="$(arg slam)"/>
	</include>

	<!-- non slam specific tools -->
	<group unless="$(arg slam)">

		<!-- Map analyzer -->
		<include file="$(find bender_nav)/launch/tools/map_analyzer.launch"/>

		<!-- amcl spreader-->
		<include file="$(find bender_nav)/launch/tools/amcl_spreader.launch"/>

		<!-- <node name="Recalculate" pkg="bender_macros" type="RecalculateGoal.py" respawn="true" output="screen" ns="bender/nav"/> -->
	</group>

	<!-- RVIZ -->
	<include file="$(find bender_nav)/launch/rviz.launch" if="$(arg rviz)"/>

</launch>
